{% extends 'base.html' %}
{% load static humanize %}

{% block title %}#{{ tag.name }}{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <div class="header-content">
            <h1 class="page-title">#{{ tag.name }}</h1>
            <p class="page-subtitle">–°—Ç–∞—Ç—å–∏ —Å —Ç–µ–≥–æ–º "{{ tag.name }}"</p>
        </div>
    </div>
</section>

<section class="articles-section">
    <div class="container">
        <div class="articles-grid">
            {% for article in articles %}
                <article class="article-card">
                    {% if article.cover_image %}
                        <a href="{{ article.get_absolute_url }}" class="article-cover">
                            <img src="{{ article.cover_image.url }}" alt="{{ article.cover_alt|default:article.title }}" loading="lazy">
                        </a>
                    {% endif %}

                    <div class="article-body">
                        {% if article.category %}
                            <a href="{% url 'articles:category' article.category.slug %}" class="article-category" style="color: {{ article.category.color }}">
                                <span>{{ article.category.icon }}</span>
                                {{ article.category.name }}
                            </a>
                        {% endif %}

                        <h3 class="article-title">
                            <a href="{{ article.get_absolute_url }}">{{ article.title }}</a>
                        </h3>

                        <p class="article-excerpt">{{ article.excerpt|truncatewords:30 }}</p>

                        <div class="article-meta">
                            <div class="author-info">
                                <a href="{% url 'users:profile' article.author.username %}" class="author-avatar">
                                    {% if article.author.profile.avatar %}
                                        <img src="{{ article.author.profile.avatar.url }}" alt="{{ article.author.username }}">
                                    {% else %}
                                        <div class="avatar-placeholder">{{ article.author.username|first|upper }}</div>
                                    {% endif %}
                                </a>
                                <div class="author-details">
                                    <a href="{% url 'users:profile' article.author.username %}" class="author-name">
                                        {{ article.author.get_full_name|default:article.author.username }}
                                    </a>
                                    <div class="article-stats">
                                        <span>{{ article.published_at|naturaltime }}</span>
                                        <span>‚Ä¢</span>
                                        <span>{{ article.reading_time }} –º–∏–Ω</span>
                                    </div>
                                </div>
                            </div>

                            <div class="article-actions">
                                <span class="action-stat">
                                    <span class="icon">üëÅ</span> {{ article.views_count }}
                                </span>
                                <span class="action-stat">
                                    <span class="icon">‚ù§Ô∏è</span> {{ article.likes_count }}
                                </span>
                            </div>
                        </div>
                    </div>
                </article>
            {% empty %}
                <div class="empty-state">
                    <p>–°—Ç–∞—Ç–µ–π —Å —ç—Ç–∏–º —Ç–µ–≥–æ–º –ø–æ–∫–∞ –Ω–µ—Ç</p>
                    <a href="{% url 'articles:home' %}" class="btn btn-primary">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}
